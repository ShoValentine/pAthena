//===== rAthena Script =======================================
//= Item Identifier
//===== By: ==================================================
//= Euphy - modded by Nubs
//===== Current Version: =====================================
//= 1.0
//===== Compatible With: =====================================
//= rAthena Project
//============================================================

-	script	item_identify	-1,{
	set .@Price, 100;	// Zeny per identify
	getinventorylist;
	for(set .@i,0; .@i<@inventorylist_count; set .@i,.@i+1) {
		if (@inventorylist_identify[.@i]) continue;
		if (Zeny < .@Price) {
			dispbottom "It costs "+.@Price+" to identify an item."; break; }
		set Zeny, Zeny-.@Price;
		delitem2 @inventorylist_id[.@i],1,0,0,0,0,0,0,0;

		setarray .@cOptID[0], @inventorylist_option_id1[.@i], @inventorylist_option_id2[.@i], @inventorylist_option_id3[.@i], @inventorylist_option_id4[.@i], @inventorylist_option_id5[.@i];
		setarray .@cOptVal[0], @inventorylist_option_value1[.@i], @inventorylist_option_value2[.@i], @inventorylist_option_value3[.@i], @inventorylist_option_value4[.@i], @inventorylist_option_value5[.@i];
		setarray .@cOptPar[0], @inventorylist_option_parameter1[.@i], @inventorylist_option_parameter2[.@i], @inventorylist_option_parameter3[.@i], @inventorylist_option_parameter4[.@i], @inventorylist_option_parameter5[.@i];

		// message strcharinfo(0), " OPTIONS Inv: " +@inventorylist_option_id1[.@i];
		// message strcharinfo(0), " OPTIONS Var: " +.@cOptID[0];

		if( .@cOptID[0] > 0 || .@cOptID[1] > 0 || .@cOptID[2] > 0 || .@cOptID[3] > 0 || .@cOptID[4] > 0 )
			getitem3 @inventorylist_id[.@i],1,1,0,0,0,0,0,0,.@cOptID, .@cOptVal, .@cOptPar;
		else
			getitem @inventorylist_id[.@i],1;

		setarray .@Total[0], .@Total[0]+1, .@Total[1]+.@Price;
	}
	if (!.@Total[0]) {
		message strcharinfo(0),"No items identified."; end; }
	specialeffect2 154;
	message strcharinfo(0),"Identified "+.@Total[0]+" items"+((.@Total[1])?" for "+.@Total[1]+" Zeny":"")+".";
	end;
}
prontera,132,189,7	duplicate(item_identify)	Identifier#iden_prt	407