//===== rAthena Script =======================================
//= Give Player VIP on login
//===== By: ==================================================
//= Nubs
//===== Current Version: =====================================
//= 1.0
//===== Compatible With: =====================================
//= rAthena Project
//============================================================

function	script	get_unique_by_uid	{
	if(getarg(0) > 0)
	{
		query_sql("SELECT `unique_id` FROM `multi_pc` WHERE `unique_id` IN ("+escape_sql(getarg(0))+")", .@uid);
		return .@uid;
	}
	return false;
}

function	script	get_unique_by_aid	{
	if(getarg(0) > 0)
	{
		query_sql("SELECT `unique_id` FROM `multi_pc` WHERE `account_id` = "+escape_sql(getarg(0)), .@uid);
		return .@uid;
	}
	return false;
}

-	script	nubs_vip_giver	-1,{
	end;

OnPCLoginEvent:
	.@c = query_sql("SELECT `account_id`, `unique_id` FROM `multi_pc` WHERE `account_id` = '"+getcharid(3)+"' AND `unique_id` = '"+get_unique_id()+"'", .@aid, .@uid);
	if(.@c ==  0) {
		query_sql("INSERT INTO `multi_pc` (`account_id`, `unique_id`) VALUES ('"+getcharid(3)+"', '"+get_unique_id()+"')");
	}

	if(! #xlaunch_vipx) {
		.@c = query_sql("SELECT `value` FROM `acc_reg_num` WHERE `key` = '#xlaunch_vipx' AND `value` = '"+get_unique_id()+"'",.@value);
		dispbottom "===============================================================", 0x666666;
		dispbottom "  Welcome to MilkyRO.", 0x76daee;
		dispbottom "===============================================================", 0x666666;

		if (.@c <= 0 ) { // not cheating
			dispbottom " Here are some items to help you start playing the game. ";
			dispbottom " ";
			getitem 16979,1;	// Silvervine_Fruit_Box10			~ 10 	x Silvervine Fruit
			getitem 8503,5;		// +10_Food_Box						~ 5 	x +10 Food
			getitem 8508,1;		// Acidbomb_50_Box					~ 50	x Acid Bottle + Grenade
			getitem 8510,1;		// Poison_Bottle_50_Box				~ 50	x Poison Bottle
			getitem 8511,1;		// Blacksmith_Blessing_20Box		~ 20	x Blacksmith Blessing
			getitem 14176,1;	// Enriched_Elunium_Box10			~ 10	x Enriched Elunium
			getitem 14177,1;	// Enriched_Oridecon_Box10			~ 10	x Enriched Oridecon
			getitem 16262,2;	// HD_Bradium_Box5					~ 10	x HD Bradium
			getitem 16263,2;	// HD_Carnium_Box5					~ 10	x HD Carnium
			getitem 17246,2;	// HD_Elunium_Box_5					~ 10	x HD Elunium
			getitem 17247,2;	// HD_Oridecon_Box_5				~ 10	x HD Oridecon
			getitem 14158,2;	// Bubble_Gum_Box					~ 10	x Bubble Gum
			getitem 14168,2;	// Convex_Mirror_Box				~ 10	x Convex Mirror
			getitem 14156,2;	// Battle_Manual_Box				~ 10	x Battle Manual
			getitem 14178,2;	// Token_Of_Siegfried_Box			~ 10	x Token of Siegfried
			getitem 12535,2;	// Yggdrasilberry_Box				~ 10	x Yggdrasil Berry
			getitem 12679,3; 	// Siege White Potion Box (30)		~ 90 	x Siege White Potion
			getitem 12680,3; 	// Siege Blue Potion Box (30)		~ 90 	x Siege Blue Potion
			getitem 13697, 1;	// Blessing Scroll lv10 Box			~ 10 	x Blessing Scroll lv10
			getitem 12914, 1;	// Increase Agility lv10 Box		~ 10 	x Increase Agility lv10
			getitem 12324, 25;	// Novice Butterfly Wings 			~ 15 	x Novice Butterfly Wings
			getitem 8501, 50;	// Milky Special Gift Box 			~ 50 	x Milky Special Gift Box
			getitem 14017, 1;	// All In One Ring Box				~ 1 	x All in One Ring
			getitem 12103, 10;	// Bloody Branch					~ 10 	x Bloody Branch
			Zeny += 1000000;	// Give 1M Zeny
			vip_time 30240;		// 3 week worth of vip time (10080)
			dispbottom " ";
			dispbottom " Other freebies are given in the form of Daily Attendance. Make sure you check-in every day.";
			dispbottom " Take note that we DO NOT have @go or @load/@return. We DO have @kill/@die (if you don't have Butterfly Wings).";
		} else {
			dispbottom " We had gifted you a few items in the account you login to";
			dispbottom " previously. In other words, <GM>Nubs doesn't like you abusing the free items by ";
			dispbottom " making multiple accounts.";
		}
		dispbottom "                                                                                                                MilkyRO Team", 0x76daee;
		dispbottom "===============================================================", 0x666666;

		// announce "Welcome to MilkyRO. Here are some things to start you with along with a 1 week VIP (only given by the gm) bonus.", BC_SELF;
		set #xlaunch_vipx,1;
		sleep2 5000;
	}
	// if(! #ServCrash20181030 && getcharid(3, strcharinfo(0)) <= 2000346){
	// 	dispbottom "===============================================================", 0x666666;
	// 	dispbottom "  Welcome to MilkyRO.", 0x76daee;
	// 	dispbottom "===============================================================", 0x666666;
	// 	dispbottom " Thank you for your patience for the past few days. We have finally migrated to a new server.";
	// 	dispbottom " We hope this will prevent the server from ever crashing again.";
	// 	dispbottom " To compensate for the inconvienence caused we will be giving you a few items.";
	// 	dispbottom " ";

	// 	getitem 8501, 5; 				// Milky Special Gift Box
	// 	getitem 12412, 3;				// HE Bubble gum x3
	// 	getitem 14533, 3;				// Field Manual 100%
	// 	dispbottom " ";
	// 	dispbottom " And finally a random reward: ";
	// 	switch(rand(1,9)){
	// 		case 1: getitem 12103, 1; break;	// Bloody Branch
	// 		case 2: getitem 12214, 3; break;	// Convex Mirror
	// 		case 3: getitem 7776, 1; break;		// Gym Pass
	// 		case 4: getitem 12254, 2; break;	// LUK +10
	// 		case 5: getitem 12252, 2; break;	// INT +10
	// 		case 6: getitem 12253, 2; break;	// DEX +10
	// 		case 7: getitem 12255, 2; break;	// VIT +10
	// 		case 8: getitem 12251, 2; break;	// AGI +10
	// 		case 9: getitem 12250, 2; break;	// STR +10
	// 	}
	// 	dispbottom " ";
	// 	dispbottom "                                                                                                                                        MilkyRO Team", 0x76daee;
	// 	dispbottom "===============================================================", 0x666666;
	// 	set #ServCrash20181030,1;
	// }

	//if(! #Diwali2018)
	//{
	//	// .@unique$ = get_unique_id();
	//	.@c = query_sql("SELECT `value` FROM `acc_reg_num` WHERE `key` = '#Diwali2018' AND `value` = '"+get_unique_id()+"'",.@value);
	//	debugmes "c: "+.@c;
	//	dispbottom "===============================================================", 0x666666;
	//	dispbottom "  We from MilkyRO wishes you a Happy Holidays!", 0x76daee;
	//	dispbottom "===============================================================", 0x666666;
	//	dispbottom " MilkyRO is currently holding <[DOUBLE EXP]> event for Deepavali 2018.";
	//	if (.@c <= 0 ) // not cheating
	//	{
	//		dispbottom " To celebrate the occasion, we gift you a few items and one temporary headgear.";
	//		getitem 8501, 5; 				// Milky Special Gift Box
	//		getitem 12264, 3;				// Bubble gum x3
	//		getitem 16361, 1;				// Costume Desert Prince = 20 days
	//	}
	//	else // dual client
	//	{
	//		dispbottom " To celebrate the occasion, we had gifted you a few items in the account you login to";
	//		dispbottom " previously. In other words, <GM>Nubs doesn't like you abusing the free items by ";
	//		dispbottom " making multiple accounts.";
	//	}
	//	dispbottom " ";
	//	dispbottom "                                                                                                                                        MilkyRO Team", 0x76daee;
	//	dispbottom "===============================================================", 0x666666;

	//	set #Diwali2018, get_unique_id();
	//}
	//end;
}
/*
sec_in02,11,32,3	script	VIP	90,{
	if (vip_status(1)) {
		mes "VIP";
	} else {
		mes "non-VIP";
	}
	mes "VIP Status : " + vip_status(1);
	mes "VIP Expire : " + vip_status(2);
	mes "VIP Time Remaining : " + vip_status(3);
	vip_time 5;
	next;
	if (vip_status(1)) {
		mes "VIP";
	} else {
		mes "non-VIP";
	}
	close;
}

prontera,156,285,1	script	Sakura	-1,{
	end;
	// We will do a script instead of function for it to call on the exact map and the exact coordinates.
	// But you can use as well function then instead of script.
	// We will also use -1 since we don't want to display the actual NPC. In other words, -1 will make the NPC invisible.
OnInit:
	// You can change @sakura to @snow, @clouds, @clouds2, @fog, @fireworks or @leaves
	atcommand "@fireworks";
	end;
}

-	script	candies	-1,{
OnNPCKillEvent:
	setarray .items,
		542, // festival cookie
		543, // festival rainbow cake
		663, // korean rice cake
		554, // mochi
		5386, // ayam
		12646, // Fried Octopus Legs
		539, // Piece_Of_Cake
		555, // Rice_Cake
		557, // Hash_Rice_Cake
		591, // Caviar_Pancake
		592, // Jam_Pancake
		5060, // party hat
		593, // Honey_Pancake
		594, // Sour_Cream_Pancake
		595, // Mushroom_Pancake
		22882, // Choco_Tteokguk
		5060, // party hat
		684, // Choco_Tteokguk
		12122, // Sesame_Pastry
		12123, // Honey_Pastry
		12124, // Rainbow_Cake
		12198, // Lucky_Rice_Cake
		12247, // Halohalo
		12320, // Pineapple_Juice
		12321, // Spicy_Sandwich
		12414, // Guarana_Candy
		12417, // Boost500
		14536, // Abrasive
		14537, // Regeneration_Potion
		14538, // Glass_Of_Illusion
		14607, // Luxurious_Dinner_W
		5318, // Poring Party Hat
		14608; // Luxurious_Dinner_E

	set .theitem, getarraysize(.items)-1;
	set .dasitem, @items[@theitem];
	if ( rand( 1000 ) < 20 ) { // 2.0% to drop
		getitem .items[rand(.theitem)],1;
	}
	end;
}

*/