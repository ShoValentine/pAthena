//===== rAthena Script =======================================
//= Catalog Magician
//===== By: ==================================================
//= skyiing, Scriptor
//===== Current Version: =====================================
//= 1.1
//===== Compatible With: =====================================
//= rAthena Project
//===== Description: =========================================
//= [Official Conversion]
//= Catalogs allow players to easily search for items in-game,
//= and to buy/sell directly from the catalog interface.
//===== Additional Comments: =================================
//= 1.0 Moved from root directory. [Euphy]
//= 1.1 Updated dialogue. [Euphy]
//============================================================ 

// Main NPC :: catalog_merchant
//============================================================
moc_para01,22,16,5	script	Catalog Magician#catal01	704,{
	if (!checkweight(1301,3)) {
		if(#language == 1) {
			mes "- Você tem muitos itens. Por favor, libere um espaço. -";
		}else{
			mes "- You have too many items. Please make space. -";
		}
		close;
	}
	set .@ticket_cost, 200;
	if(#language == 1) {
		mes "[Catalog Magician]";
		mes "Olha... a Academia Mágica";
		mes "em Geffen agora é diretamente";
		mes "vendendo o novo";
		mes "^007777Universal Catálogo de Prata^000000!";
		next;
		mes "Ele está olhando as palavras";
		mes "escrito em sua mão.";
		mes "Ele parece muito ocupado";
		mes "para olhar para você.";
		next;
		mes "[Catalog Magician]";
		mes "Um novo catálogo";
		mes "acabou de sair!";
		mes "Você pode checar";
		mes "quais itens você pode trocar";
		mes "e quais itens estão à venda";
		mes "do vendedor.";
		next;
		mes "[Catalog Magician]";
		mes "O ^007777Universal Catálogo de Prata^000000";
		mes "custa apenas 200z!";
		mes "Você pode comprar até 50 peças de uma só vez!";
		next;
		switch(select("Compre um ^007777Universal Catálogo de Prata^000000:Eu não preciso disso!:Você não parece um vendedor!")) {
		case 1:
			mes "[Catalog Magician]";
			mes "Você ... quer todas as 50 peças?";
			mes "Ou quantos você precisa?";
			next;
			while (1) {
				input .@input;
				mes "[Catalog Magician]";
				if (.@input == 0) {
					mes "O comércio foi interrompido!";
					mes "Eu não sei o que fazer a seguir ...";
					mes "O que devo fazer?";
					emotion ET_PROFUSELY_SWEAT, playerattached();
					close;
				} else if (.@input < 1 || .@input > 50) {
					mes "Deve ser menos de 50 peças.";
					next;
				} else
					break;
			}
			set .@sell, .@ticket_cost * .@input;
			mes "O número total de catálogos que você está tentando comprar é " + .@input + " peças.";
			mes "Isso custa " + .@sell + " z.";
			if (Zeny < .@sell) {
				mes "Parece que você não tem dinheiro suficiente.";
				mes "Você pode vender seu equipamento";
				mes "para ganhar mais dinheiro ... se você quiser.";
				close;
			}
			mes "Ok, aqui vai para você.";
			set Zeny, Zeny - .@sell;
			getitem 12580,.@input; //Vending_Search_Scroll
			close;
		case 2:
			mes "[Catalog Magician]";
			mes "Argh ... você realmente precisa disso";
			mes "item ... Você quer que eu";
			mes "explicar de novo? Eu não sei";
			mes "o que fazer a seguir ...";
			mes "O que devo fazer?";
			emotion ET_PROFUSELY_SWEAT, playerattached();
			close;
		case 3:
			mes "[Catalog Magician]";
			mes "Meu trabalho real é um mágico.";
			mes "Eu ia perguntar ao comerciante";
			mes "guild para vendê-los, mas eles eram";
			mes "tentando usá-los como um apêndice";
			mes "em vendas de vassouras. É por isso que";
			mes "Eu estou vendendo estes por mim mesmo.";
			next;
			mes "[Catalog Magician]";
			mes "Existem muitos aventureiros";
			mes "aqui quem vem e vai.";
			mes "Tenho certeza que posso vender para todos eles em breve.";
			mes "Você não acha?";
			mes "Então ... vamos começar !! Compre mais deles, por favor! POR FAVOR ...!";
			close;
		}
	}else{
		mes "[Catalog Magician]";
		mes "Look... the Magic Academy";
		mes "in Geffen is now directly";
		mes "selling the brand new";
		mes "^007777Universal Catalog Silver^000000!";
		next;
		mes "He is looking at the words";
		mes "written on his hand.";
		mes "He seems too busy";
		mes "to look at you.";
		next;
		mes "[Catalog Magician]";
		mes "A brand new catalog";
		mes "has just come out!";
		mes "You can check";
		mes "what items you can trade";
		mes "and what items are on sale";
		mes "from the vendor.";
		next;
		mes "[Catalog Magician]";
		mes "The ^007777Universal Catalog Silver^000000";
		mes "costs only 200z!";
		mes "You can buy up to 50 pieces at once!";
		next;
		switch(select("Buy a ^007777Universal Catalog Silver^000000:I don't need it!:You don't look like a vendor!")) {
		case 1:
			mes "[Catalog Magician]";
			mes "You... want all 50 pieces?";
			mes "Or how many do you need?";
			next;
			while (1) {
				input .@input;
				mes "[Catalog Magician]";
				if (.@input == 0) {
					mes "The trade has been stopped!";
					mes "I don't know what to do next...";
					mes "What should I do?";
					emotion ET_PROFUSELY_SWEAT, playerattached();
					close;
				} else if (.@input < 1 || .@input > 50) {
					mes "It should be less than 50 pieces.";
					next;
				} else
					break;
			}
			set .@sell, .@ticket_cost * .@input;
			mes "The total number of catalog(s) that you're trying to purchase is " + .@input + " pieces.";
			mes "It costs " + .@sell + " z.";
			if (Zeny < .@sell) {
				mes "It seems you don't have enough money.";
				mes "You can sell your equipment";
				mes "to make more money... if you want.";
				close;
			}
			mes "Ok, here you go.";
			set Zeny, Zeny - .@sell;
			getitem 12580,.@input; //Vending_Search_Scroll
			close;
		case 2:
			mes "[Catalog Magician]";
			mes "Argh... you really need this";
			mes "item... Do you want me to";
			mes "explain again? I don't know";
			mes "what to do next...";
			mes "What should I do?";
			emotion ET_PROFUSELY_SWEAT, playerattached();
			close;
		case 3:
			mes "[Catalog Magician]";
			mes "My real job is a magician.";
			mes "I was going to ask the merchant";
			mes "guild to sell them, but they were";
			mes "trying use them as an appendix";
			mes "into broom sales. That's why";
			mes "I'm selling these by myself.";
			next;
			mes "[Catalog Magician]";
			mes "There are many adventurers";
			mes "here who come and go.";
			mes "I'm pretty sure that I can sell to all of them soon.";
			mes "Don't you think so?";
			mes "So... let's start!! Buy more of them, please! PLEASE...!";
			close;
		}
	}
}
