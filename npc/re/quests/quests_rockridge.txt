//===== rAthena Script =======================================
//= Rock Ridge Quests.
//===== Description: =========================================
//= [Walkthrough Conversion]
//--- Quests list:
//===== Changelogs: ==========================================
//= 1.0 First version. [Capuche]
//============================================================

alberta,240,103,5	script	Karam Pucci#alberta	4_M_SEAMAN,3,3,{
	if (rock_main_quest == 0 && isbegin_quest(7790) == 0) {// first time
		if (BaseLevel < 100) {
			mes "[Karam Pucci]";
			mes "Hello, up-and-coming adventurer!";
			mes "May I talk to you for a second?";
			next;
			if (select( "What can I do for you?", "I'm busy." ) == 2) {
				mes "[Karam Pucci]";
				mes "That's heartless.";
				mes "I was going to tell you about a new continent, but if you don't want to know, that's fine by me.";
				next;
				mes "[Karam Pucci]";
				mes "On second look, you're too weak to go there, anyway.";
				mes "Alright, go on your way.";
				mes "If you have friends who are at least ^4d4dffLevel 100^00000, tell them to come talk to me, alright?";
				close;
			}
			mes "[Karam Pucci]";
			mes "Have you heard the news about the new continent?";
			mes "My company, Pink Rose, stumbled across it while looking for new markets.";
			next;
			mes "[Karam Pucci]";
			mes "Now there's a city named ^4d4dffRock Ridge^000000,";
			mes "and many people already have flocked there, wanting a share of gold that the new land has to offer.";
			next;
			mes "[Karam Pucci]";
			mes "If you want, I can send you there.";
			mes "What do you say?";
			next;
			mes "[Karam Pucci]";
			mes "Usually, the ship fare is ^4d4dff10,000 Zeny^000000 for a one-way trip,";
			mes "but I can waive it for you just this once.";
			next;
			if (select( "I'm in! I'm in!", "Let me take a rain check." ) == 2) {
				mes "[Karam Pucci]";
				mes "Huh? Sure, no problem.";
				mes "But bring lots of friends with you next time, alright?";
				mes "Rock Ridge is the land of dreams and opportunities.";
				close;
			}
			mes "[Karam Pucci]";
			mes "Good! Then let's go to";
			mes "Rock Ridge, the land of gold and opportunities!";
			setquest 7790;// Rock Ridge, Land of Opportunities
			completequest 7790;// Rock Ridge, Land of Opportunities
			close;
		}
		mes "[Karam Pucci]";
		mes "You look like a capable adventurer.";
		mes "I've been looking for someone like you.";
		next;
		mes "[Karam Pucci]";
		mes "Have you heard the news about the new continent?";
		mes "My company, Pink Rose, stumbled across it while looking for new markets.";
		next;
		mes "[Karam Pucci]";
		mes "Now there's a city named ^4d4dffRock Ridge^000000,";
		mes "and many people already have flocked there, wanting a share of gold that the new land has to offer.";
		next;
		select("Why are you looking for adventurers?", "Are you looking for settlers?");
		mes "[Karam Pucci]";
		mes "Actually...";
		mes "Rock Ridge is having a tiny bit of a problem,";
		mes "and it's not something the citizens can handle.";
		next;
		mes "[Karam Pucci]";
		mes "Rock Ridge is a mining city,";
		mes "so most of its citizens are miners and merchants.";
		next;
		mes "[Karam Pucci]";
		mes "Recently, a group of ^4d4dffbandits have decided that they want the mine^000000.";
		next;
		select("So this is a mission.");
		mes "[Karam Pucci]";
		mes "Huh? Yes, in a way, I guess.";
		mes "You can find out more about it if you talk to Mr. ^4d4dffCostello^000000, the mayor of Rock Ridge.";
		mes "I don't know much, except that the city needs help from capable adventurers.";
		next;
		if (select( "Got it.", "I'm not doing it." ) == 2) {
			mes "[Karam Pucci]";
			mes "*Groan* Alright, then I'd better look for someone else.";
			mes "Thank you for your time.";
			close;
		}
		mes "[Karam Pucci]";
		mes "Okay, then off we go to Rock Ridge.";
		mes "That place is pretty far and it's expensive to get there, but I can waive the ship fare for you just this once.";
		next;
		mes "[Karam Pucci]";
		mes "Then let's go.";
		setquest 7790;// Rock Ridge, Land of Opportunities
		setquest 7791;// Problems in Rock Ridge
		completequest 7790;
		rock_main_quest = 1;
		close2;
		warp "harboro1",70,215;
		end;
	}
	mes "[Karam Pucci]";
	mes "Hey, welcome back.";
	mes "It's a perfect day to visit Rock Ridge, isn't it?";
	next;
	if (select( "Off we go to Rock Ridge!", "No." ) == 2) {
		mes "[Karam Pucci]";
		mes "Hmpf, why are you so heartless?";
		mes "Alright, but come back if you change your mind.";
		close;
	}
	if (BaseLevel >= 100 && rock_main_quest == 0) {
		mes "[Karam Pucci]";
		mes "By the way, you've grown pretty strong.";
		mes "You look like a capable adventurer.";
		next;
		mes "[Karam Pucci]";
		mes "Would you be interested in taking on a job in Rock Ridge?";
		next;
		mes "[Karam Pucci]";
		mes "Actually...";
		mes "Rock Ridge is having a tiny bit of a problem,";
		mes "and it's not something the citizens can handle.";
		next;
		mes "[Karam Pucci]";
		mes "Have you heard about the bandits in Rock Ridge?";
		mes "Recently, a group of ^4d4dffbandits have decided that they want the mine^000000.";
		next;
		mes "[Karam Pucci]";
		mes "You can find out more about it if you talk to Mr. ^4d4dffCostello^000000, the mayor of Rock Ridge.";
		mes "I don't know much, except that the city needs help from capable adventurers.";
		next;
		mes "[Karam Pucci]";
		mes "Then let's go.";
		setquest 7791;// Problems in Rock Ridge
		rock_main_quest = 1;
		next;
	}
	if (Zeny < 10000) {
		mes "[Karam Pucci]";
		mes "Hm, I don't think you have enough money to pay the fare.";
		mes "The place is pretty far, so it's expensive to get there.";
		mes "Didn't I tell you it's ^4d4dff10,000 Zeny^000000 to get there?";
		close;
	}
	mes "[Karam Pucci]";
	mes "Hold on to the rail if you don't want to get swept away by the waves!";
	Zeny = Zeny - 10000;
	close2;
	warp "harboro1",70,215;
	end;

OnTouch:
	if (BaseLevel >= 100 && isbegin_quest(7790) == 0)
		npctalk "Hey, may I talk to you for a second?", "", bc_self;
	end;

OnInit:
	questinfo 7790, QTYPE_QUEST, 1;
	setquestinfo_level 7790,100,175;
	end;
}

harboro1,80,218,5	script	Costello#harboro1	10210,{
	if (rock_main_quest == 0) {
		npctalk "...Ah, what's taking Karam so long? I needed people yesterday!";
		end;
	}
	if (rock_main_quest == 1) {
		mes "";// todo fix me
		unittalk getcharid(3), "" + strcharinfo(0) + " : Mr. Costello?", bc_self;
		sleep2 1000;
		npctalk "*Gasp*", "", bc_self;;
		sleep2 1000;
		mes "[Costello]";
		mes "*Ahem* Yes, this is him.";
		mes "I'm Costello, mayor of Rock Ridge.";
		mes "You know me because...?";
		next;
		select("Mr. Karam Pucci sent me.");
		mes "[Costello]";
		mes "Oh, he did!";
		mes "Welcome! I've been waiting for you!";
		mes "So how much did Karam tell you?";
		next;
		mes "[Costello]";
		mes "Ah, so he told you about the bandits.";
		mes "As you see, Rock Ridge is a village of pioneers built on a wasteland.";
		next;
		mes "[Costello]";
		mes "And, of course, most of its residents came from Midgard.";
		next;
		select("Was it unoccupied until you arrived?");
		mes "[Costello]";
		mes "No. There's a couple of native tribes.";
		mes "One of them is the ^4d4dffCacti^000000, cute-looking people that live nearby.";
		next;
		mes "[Costello]";
		mes "We couldn't have built Rock Ridge if it weren't for them.";
		mes "They're very good friends to us.";
		next;
		mes "[Costello]";
		mes "The other tribe is the ^4d4dffTauruses^000000.";
		mes "These Tauruses are warlike, and pillaging is their only way of living.";
		next;
		mes "[Costello]";
		mes "The Cacti and we the people of Rock Ridge call them the ^4d4dffBuffalo Bandits^000000.";
		next;
		mes "[Costello]";
		mes "It's because they've been preying on us, and it's getting worse.";
		mes "Now, our vigilante group and sheriff's office aren't enough to keep them at bay.";
		next;
		mes "[Costello]";
		mes "The Pink Rose Headquarters has decided that it needs capable adventurers from Midgard to take care of this situation.";
		mes "And that's why you've been invited to Rock Ridge.";
		next;
		mes "[Costello]";
		mes "Recently, the bandits ^4d4dffstole the freight train^000000 that we use to transport ores.";
		mes "And as if that wasn't enough, they took up residence inside our mine. Now I can't produce any profits and the company is not happy with me.";
		next;
		mes "[Costello]";
		mes "And what about the miners? They came here full of hope, but now they're living on the street without jobs or money.";
		mes "*Gasp* Don't tell anyone there's no work to do in the village.";
		mes "I can't have people leaving as soon as they arrive.";
		next;
		mes "[Costello]";
		mes "Anyway, I'll appreciate if you can take care of the Buffalo Bandits.";
		mes "I don't care how you do it, as long as you do it.";
		next;
		mes "[Costello]";
		mes "Go to the Sheriff and tell him that you came to help with the Buffalo Bandits situation. He'll tell you what to do.";
		mes "Please help Pink Rose? I mean, Rock Ridge.";
		erasequest 7791;
		setquest 7792;// Problems in Rock Ridge 2
		rock_main_quest = 2;
		next;
		select("Who's the sheriff?");
		mes "[Costello]";
		mes "Oh, I'm sorry, I didn't tell you his name, did I?";
		mes "Follow the main road in the village east, and you'll see the sheriff's office.";
		mes "You could also ask the guide in front of me for the directions.";
		next;
		mes "[Costello]";
		mes "When you get there, ask for Mr. ^4d4dffWyatt Warp^000000.";
		mes "Yes, that was his name.";
		mes "Hah hah hah!";
		close;
	}
	if (rock_main_quest == 2) {
		mes "[Costello]";
		mes "Follow the main road in the village east, and you'll see the sheriff's office.";
		mes "Mr. ^4d4dffWyatt Warp^000000 is the sheriff of this village, and he can tell you more about the bandits.";
		close;
	}
	if (rock_main_quest == 3) {
		mes "[Costello]";
		mes "You look grim. What's wrong?";
		mes "The Buffalo Bandits want to make a bargain with us.";
		mes "For the ores. What do they want in exchange?";
		next;
		select("You.");
		mes "[Costello]";
		npctalk "EXCUSE ME?", "", bc_self;
		mes "What? Does it make sense to you?";
		mes "They must have lost their minds!";
		next;
		mes "[Costello]";
		mes "Why would they want me, anyway?";
		mes "You're just joking, right? Please say you are.";
		next;
		npctalk "Geez! This makes no sense!", "", bc_self;
		mes "[Costello]";
		mes "And they want to talk to me and Wyatt and no one else.";
		mes "Hah! I don't want to do this to Wyatt, but I'm just going to leave Rock Ridge on the next ship.";
		next;
		unittalk getcharid(3), "" + strcharinfo(0) + " : ...", bc_self;
		mes "[Costello]";
		mes "Why are you looking at me like that?";
		mes "Protecting my company's profits is important, sure, but I can't do that if I'm dead, now can I?";
		next;
		select("I was joking.");
		npctalk "Huh?", "", bc_self;
		mes "[Costello]";
		mes "What about their wanting to bargain? Were you joking about that too?";
		mes "That's real, I see.";
		next;
		mes "[Costello]";
		mes "Can't you just attend the meeting, maybe pretend to be someone from HQ?";
		mes "You could listen to what they have to say,";
		next;
		mes "[Costello]";
		mes "and tell them you'd have to talk to the Headquarters first.";
		mes "Mm, and...";
		next;
		mes "[Costello]";
		mes "What was that strange look on your face?";
		mes "...Anyway, Wyatt and you can attend the meeting without me.";
		mes "Now, excuse me. I'd better find a place to hide...";
		next;
		mes "^4d4dffCostello is looking around him and babbling anxiously.";
		mes "I should go tell Wyatt that Costello wants to hear what the bandits have to say.^000000";
		erasequest 7793;
		setquest 7794;// Expected Response
		rock_main_quest = 4;
		close;
	}
	if (rock_main_quest == 4 || rock_main_quest == 5) {
		mes "[Costello]";
		mes "I-I'll be counting on you, Adventurer.";
		mes "You could listen to what they have to say,";
		next;
		mes "[Costello]";
		mes "and tell them you'd have to talk to the Headquarters first.";
		mes "...Anyway, Wyatt and you can attend the meeting without me.";
		mes "I'll be here somewhere in case you need me.";
		close2;
		npctalk "Argh, I don't want to be responsible for this hellhole!", "", bc_self;
		end;
	}
	if (rock_main_quest == 6) {
		mes "[Costello]";
		mes "I've heard the news.";
		mes "You've caught Johnny James, the infamous leader of the Buffalo Bandits.";
		mes "This means we have a bargaining chip now.";
		next;
		mes "[Costello]";
		mes "What bargain? Maybe we could just extract the location of the ores out of him.";
		mes "I'll let Sheriff Warp take care of this.";
		close;
	}
	if (rock_main_quest < 13) {
		mes "[Costello]";
		mes "Mm, how about we just pay them ^4d4dffa million Zeny or so^000000 for the ores?";
		mes "That'll make things easier for both parties.";
		next;
		select("Do you have that kind of money?");
		mes "[Costello]";
		mes "Of course, not.";
		mes "But I'm pretty sure you do.";
		mes "Justice can be so costly sometimes...";
		next;
		mes "[Costello]";
		mes "I'm sorry I said that. That was thoughtless.";
		mes "You and the Sheriff take care of it. I'll stay out of it.";
		mes "You do that.";
		close;
	}
	if (rock_main_quest == 13 || rock_main_quest == 14) {
		mes "[Costello]";
		mes "I've heard you're still bargaining with them.";
		mes "I've also heard a strange rumor,";
		mes "but you should know that I don't hold a grudge against you.";
		next;
		mes "[Costello]";
		mes "I'm safe as long as you're acting mayor.";
		close;
	}
	if (rock_main_quest == 15) {
		mes "[Costello]";
		mes "How's it going?";
		mes "Sheriff Warp only smiles at me.";
		next;
		mes "[Costello]";
		mes "And why am I hearing that you'd be the next mayor?";
		mes "What on earth is going on?";
		next;
		if (select( "It's a secret.", "You should pack and leave." ) == 1) {
			mes "[Costello]";
			mes "Why, is this some sort of secret operation?";
			mes "This has to do with your pretending to be mayor for the meeting with the bandits.";
			next;
			mes "[Costello]";
			mes "I'm okay, as long as you don't want to be mayor.";
			mes "All I have to do is just wait.";
			close;
		}
		mes "[Costello]";
		mes "Wh-wha...?";
		mes "...!";
		next;
		select("I'm messing with you. Breathe.");
		mes "[Costello]";
		mes "*Pant Pant*";
		mes "You're mean, do you know that?";
		mes "I'm at the dock for personal safety issues,";
		next;
		mes "[Costello]";
		mes "and that's not enough reason to be dismissed from office.";
		mes "If that was a joke, it wasn't funny.";
		mes "I'm going to talk to Sheriff Warp about you.";
		close;
	}
	if (rock_main_quest < 22) {
		mes "[Costello]";
		mes "If only we didn't have to worry about those Buffalo Bandits...!";
		close;
	}
	mes "[Costello]";
	mes "I'd like to thank you on behalf of Rock Ridge and my company.";
	mes "...";
	mes "I'm really grateful for everything you've done, and... and...";
	mes "Mm, I don't know what else to say.";
	next;
	mes "[Costello]";
	mes "By the way, you've declared war against Albert Ford.";
	mes "I guess I'll have to stay at the dock for a little longer.";
	mes "To, you know, recruit more adventurers and all.";
	mes "Ah, I'm busy, and I wouldn't mind being busier!";
	close;

OnInit:
	questinfo 7792, QTYPE_QUEST, 1;
	setquestinfo_req 7792,7791,1;
	questinfo 7794, QTYPE_QUEST, 1;
	setquestinfo_req 7794,7793,1;
	end;
}

har_in01,20,30,5	script	Wyatt Warp#har_in01	10211,{
	disable_items;
	if (checkweight(1001,1) == 0) {
		mes "- You are carrying too many items to proceed with this quest. -";
		close;
	}
	if (rock_main_quest < 2) {
		mes "[Wyatt Warp]";
		mes "Are you a new settler?";
		mes "People just won't stop coming to this village.";
		mes "Hey, we're not hiring.";
		next;
		mes "[Wyatt Warp]";
		mes "If you're looking for a job, go somewhere else.";
		mes "Maybe Costello could hire you to work at the mine.";
		close;
	}
	if (rock_main_quest == 2) {
		mes "[Wyatt Warp]";
		mes "What is it?";
		mes "I have a very urgent and grave matter at hand. Please don't interrupt me.";
		next;
		select("I know about the Buffalo Bandits.");
		mes "[Wyatt Warp]";
		mes "Mm? Wait, did Costello send you?";
		mes "The Pink Rose headquarters said it'd send help to deal with the Buffalo Bandits.";
		mes "It sent me adventurers.";
		next;
		mes "[Wyatt Warp]";
		mes "By the way, where's Costello? He's the mayor? He can't disappear on me at a critical time like this!";
		mes "Oh, right? He didn't disappear. He's at the dock, so he could leave at a moment's notice.";
		next;
		mes "[Wyatt Warp]";
		mes "Why do I keep forgetting I can't expect anything from that man?";
		mes "At least I have you, Adventurer. I'm sure we can handle this between us two.";
		next;
		select("What can I do?");
		mes "[Wyatt Warp]";
		mes "Did you hear that the bandits attacked our freight train and stole all the ores in it?";
		mes "Good, then you also must know they took up residence in our mine.";
		next;
		mes "[Wyatt Warp]";
		mes "I understand why Pink Rose is not happy about this.";
		mes "The ^4d4dffpurple ores^000000 produced in the mine are pretty lucrative. In fact, they're Pink Rose's best-selling product.";
		next;
		mes "[Wyatt Warp]";
		mes "Hell, they're the reason this village exists.";
		mes "And the bandits stole them from the company.";
		mes "It's completely understandable why the company is so agitated.";
		next;
		mes "[Wyatt Warp]";
		mes "And now, I've just received a letter from those barbarians.";
		mes "They want to bargain over the ores that they've stolen.";
		mes "I don't know what they'd demand in exchange for the ores,";
		next;
		mes "[Wyatt Warp]";
		mes "but according to that letter, the bandit leader ^4d4dffJohnny James^000000 wants to talk to someone from our side, one on one.";
		mes "It has to be Costello, right?";
		next;
		mes "[Wyatt Warp]";
		mes "Or maybe you could meet him instead, pretending to be someone from Headquarters. I'll go with you.";
		next;
		if (select( "We should talk to Mayor Costello first.", "That's an interesting idea." ) == 1) {
			mes "[Wyatt Warp]";
			mes "Alright, then go talk to him.";
			mes "If we can't avoid this meeting, then we'd better be prepared.";
			next;
			mes "[Wyatt Warp]";
			mes "I'm sure you can find Costello by the dock, as usual.";
			mes "I already know what he's going to say, but he's the mayor; at least he needs to know what's going on.";
		}
		else {
			mes "[Wyatt Warp]";
			mes "The company sent a capable adventurer this time.";
			mes "We can take care of this between us two, but the mayor needs to know what's going on in his village.";
			next;
			mes "[Wyatt Warp]";
			mes "Alright, then go talk to him.";
			mes "In the meantime, I'll prepare for the meeting.";
			next;
			mes "[Wyatt Warp]";
			mes "I'm sure you can find Costello by the dock, as usual.";
		}
		mes "I'll meet you here again later.";
		rock_main_quest = 3;
		erasequest 7792;// Problems in Rock Ridge 2
		setquest 7793;// Good News
		close;
	}
	if (rock_main_quest == 3) {
		mes "[Wyatt Warp]";
		mes "I'm sure you can find Costello by the dock, as usual.";
		mes "I'll meet you here again later.";
		close;
	}
	if (rock_main_quest == 4) {
		mes "[Wyatt Warp]";
		mes "Ah, you're back.";
		mes "I'm ready for the meeting.";
		mes "It'll be just you and me, right?";
		next;
		mes "[Wyatt Warp]";
		mes "What about Costello?";
		mes "There's no way he'd want to go there.";
		mes "I knew it'd be you instead of him.";
		next;
		mes "[Wyatt Warp]";
		mes "It's about time to meet the bandits.";
		mes "Exit the village through the eastern gate, and you'll be in the ^4d4dffKiwawa Desert^000000.";
		mes "That's what the Cacti call the wasteland. Anyway, there's an ^4d4dffunmoving freight train^000000 on the north side of the desert.";
		next;
		mes "[Wyatt Warp]";
		mes "If you don't think you can find it, then just follow the railroad.";
		mes "We'll wait for him by the train.";
		mes "Let's go see how ugly that leader of the Buffalo Bandits, ^4d4dffJohnny James^000000, is.";
		erasequest 7794;// Expected Response
		setquest 7795;// Negotiation on the Railroad
		rock_main_quest = 5;
		close;
	}
	if (rock_main_quest == 5) {
		mes "[Wyatt Warp]";
		mes "Exit through the eastern gate and follow the railroad north. You'll see an ^4d4dffunmoving freight train^000000.";
		mes "Let's wait for the bandit by the train.";
		close;
	}
	if (rock_main_quest == 6) {
		mes "";// todo fix me
		npctalk "I say we turn him against the rest of his gang.", "Ivoka Skudi#rr03", bc_self;
		sleep2 2000;
		npctalk "Don't you think regular torture or threats would work?", "", bc_self;
		sleep2 4000;
		npctalk "Johnny James isn't the only one we have to worry about. There's?", "Ivoka Skudi#rr03", bc_self;
		sleep2 1000;
		npctalk "I know. There's Albert.", "", bc_self;
		sleep2 2000;
		mes "[Wyatt Warp]";
		mes "Welcome.";
		mes "*Chuckle* You're so useful. Just having you standing next to us works like a charm.";
		next;
		mes "[Wyatt Warp]";
		mes "Anyway, Johnny James is more stubborn than I thought.";
		mes "He still hasn't told us where the stolen ores are.";
		next;
		npctalk "He probably wants us to exchange him for the ores.", "Ivoka Skudi#rr03", bc_self;
		mes "[Wyatt Warp]";
		mes "That's possible.";
		mes "I'm guessing Albert Ford would want to talk to us soon.";
		next;
		mes "[Wyatt Warp]";
		mes "But that's just temporary.";
		npctalk "We have to reclaim the mine too!", "Ivoka Skudi#rr03", bc_self;
		mes "That's right. We have to reclaim the mine too.";
		next;
		mes "[Wyatt Warp]";
		mes "So we've been discussing our next move.";
		mes "Ivoka wants to turn him against the rest of his gang.";
		next;
		select("He could just tell us where the ores are, and walk out of here free.");
		mes "[Wyatt Warp]";
		mes "Normally, that'd be the first thing to come to mind.";
		mes "The problem is,";
		mes "this Johnny guy is not normal.";
		mes "Or maybe he's waiting for something.";
		next;
		mes "[Wyatt Warp]";
		mes "Either way, his refusal to cooperate is making things difficult for us.";
		mes "I'm thinking we should wait until Albert contacts us for a meeting,";
		next;
		mes "[Wyatt Warp]";
		mes "but Ivoka has a different idea.";
		mes "Let's listen to what he has to say.";
		rock_main_quest = 7;
		close;
	}
	if (rock_main_quest == 7) {
		mes "[Wyatt Warp]";
		mes "Let's listen to what Ivoka has to say.";
		close;
	}
	if (rock_main_quest == 8) {
		mes "[Wyatt Warp]";
		mes "^4d4dffJohnny James is locked up in the basement^000000.";
		mes "Let's try to make him believe that Albert has betrayed him, and his only chance to get out of here is talking to us.";
		close;
	}
	if (rock_main_quest == 9) {
		mes "[Wyatt Warp]";
		mes "Did Johnny even give you the password to signal Albert?";
		mes "He's helping us catch Albert.";
		next;
		mes "[Wyatt Warp]";
		mes "Alright, then go meet with Albert.";
		mes "In the meantime, I'll scare Johnny a little bit further.";
		mes "Mwa hah hah!";
		next;
		mes "[Wyatt Warp]";
		mes "Oh, right?I almost forgot that ^4d4dffShawn McCurdy^000000 wants to talk to you about the mine.";
		mes "You can find him on the way out. Why don't you talk to him?";
		next;
		mes "[Wyatt Warp]";
		mes "Who knows? You might find something to use against the Buffalo Bandits.";
		erasequest 7798;
		setquest 7799;// Shawn McCurdy's Weapon 1
		rock_main_quest = 10;
		close;
	}
	if (rock_main_quest == 10) {
		mes "[Wyatt Warp]";
		mes "I'll let you handle the negotiation with Albert.";
		mes "I want to get him while he thinks you really came from Headquarters.";
		next;
		mes "[Wyatt Warp]";
		mes "Oh, and you should talk to Shawn McCurdy on your way out.";
		mes "He said he has something important to tell you.";
		close;
	}
	if (rock_main_quest == 11) {
		mes "[Wyatt Warp]";
		mes "I see.";
		mes "We could use it to convince the bandits that the mine is not as useful as they think it is.";
		mes "And that's not a complete lie. Or it won't be, soon.";
		next;
	}
	if (rock_main_quest < 14) {
		mes "[Wyatt Warp]";
		mes "This depends on you and Shawn.";
		mes "Like Shawn said, go to the second level in the mine, get an ore, and show it to Albert.";
		mes "That'll tame him further.";
		next;
		mes "[Wyatt Warp]";
		mes "How can I get to the mine?";
		mes "Follow the railroad east.";
		mes "Try to stay in the right track.";
		close;
	}
	if (rock_main_quest == 14) {
		if (isbegin_quest(7809) == 0 && countitem(25247) > 0) {
			mes "[Wyatt Warp]";
			mes "Shawn was right.";
			mes "Give me the ore.";
			mes "I'll give it to Shawn.";
			delitem 25247, countitem(25247);// Purple Ore
			setquest 7809;// Collecting Ores
			completequest 7809;// Collecting Ores
			next;
		}
		mes "[Wyatt Warp]";
		mes "Um? What's that hair in your hand?";
		mes "Albert's mane?";
		mes "Did you really take care of him?";
		next;
		mes "[Wyatt Warp]";
		mes "Geez, you adventurers are a scary sort.";
		mes "Mm? No? Oh, he gave it to you.";
		mes "Ah, to fool Johnny!";
		next;
		mes "[Wyatt Warp]";
		mes "*Shakes his head* Hah hah hah.";
		mes "Alright, go talk to Johnny one last time.";
		mes "We should at least let him have good dreams, right?";
		close;
	}
	if (rock_main_quest == 15) {
		if (isbegin_quest(7809) == 0 && countitem(25247) > 0) {
			mes "[Wyatt Warp]";
			mes "Shawn was right.";
			mes "Give me the ore.";
			mes "I'll give it to Shawn.";
			delitem 25247, countitem(25247);// Purple Ore
			setquest 7809;// Collecting Ores
			completequest 7809;// Collecting Ores
			next;
		}
		mes "[Wyatt Warp]";
		mes "Alright, then I'll let Shawn handle this.";
		mes "Could you go tell Shawn where the ores are?";
		mes "I'll talk to Costello.";
		next;
		mes "[Wyatt Warp]";
		mes "Oh, and";
		mes "I think it's time we warn Albert.";
		mes "Tell him the longer they stay inside the mine, the slimmer their chances of living.";
		next;
		select("Are you just going to fight them?");
		mes "[Wyatt Warp]";
		mes "Yes, we're done talking.";
		mes "It's time to threaten them.";
		mes "For now, ^4d4dfflook for the ores with Shawn.^000000";
		next;
		mes "[Wyatt Warp]";
		mes "Once we get the ores back, we'll have nothing to worry about.";
		mes "Eliminate Buffalo Bandits around Rock Ridge and the mine,";
		mes "and show their ^4d4dffmufflers and scarves to Albert.^000000";
		next;
		mes "[Wyatt Warp]";
		mes "He's stupid, but even he'd know what that means.";
		mes "*Chuckle* Who knew adventurers could be so useful?";
		mes "I'm going to tell Costello to recruit more adventurers like you!";
		next;
		mes "[Wyatt Warp]";
		mes "Now go to ^4d4dffShawn McCurdy^000000, will you?";
		mes "We're almost done with the bandits!";
		mes "Hang in there!";
		erasequest 7804;// Location of the Ores
		setquest 7805;// Location of the Ores 2
		rock_main_quest = 16;
		close;
	}
	if (rock_main_quest == 16) {
		mes "[Wyatt Warp]";
		mes "Now go to ^4d4dffShawn McCurdy^000000, will you?";
		mes "We're almost done with the bandits!";
		next;
		mes "[Wyatt Warp]";
		mes "Once we retrieve our ores, we'll take down the bandits!";
		mes "Don't forget to teach Albert a lesson this time.";
		close;
	}
	if (rock_main_quest < 21) {
		mes "[Wyatt Warp]";
		mes "*Chuckle* What should I do with the Buffalo Bandits?";
		mes "Just the thought of toying with them gets me excited.";
		close;
	}
	if (rock_main_quest == 21) {
		if (countitem(25248) < 1) {
			mes "[Wyatt Warp]";
			mes "Shawn said you'd bring the ore box. Where is it?";
			mes "If you left it somewhere because it's heavy, please go bring it.";
			close;
		}
		mes "[Wyatt Warp]";
		mes "How did it go?";
		mes "You've declared war against Albert Ford.";
		next;
		mes "[Wyatt Warp]";
		mes "Mwa hah hah hah!";
		mes "This is exactly what I've wanted!";
		mes "We'd better bring in more adventurers, so we could get rid of the bandits at once!";
		next;
		mes "[Wyatt Warp]";
		mes "You're the hero of Rock Ridge.";
		mes "The first level in the mine is done for, but the second floor has enough reserve to keep us going for a while. The problems with the mine are solved.";
		next;
		mes "[Wyatt Warp]";
		mes "The only thing left for me to do is reward you.";
		mes "Here, pick one you like.";
		mes "Rock Ridge thanks you";
		mes "for your help.";
		next;
		mes "[Wyatt Warp]";
		mes "Both badges are worn by us Vigilantes, but they provide different effects.";
		mes "I have <ITEM>Vigilante Badge (L)<INFO>28495</INFO></ITEM>";
		mes "and <ITEM>Vigilante Badge (R)<INFO>28496</INFO></ITEM>.";
		mes "Pick one you like.";
		next;
		setarray .@item_name$[0], "Vigilante Badge (L)", "Vigilante Badge (R)";
		setarray .@item_id[0], 28495, 28496;
		.@s = select( "Vigilante Badge (L)", "Vigilante Badge (R)" ) - 1;
		mes "[Wyatt Warp]";
		mes "Do you want <ITEM>" + .@item_name$[.@s] + "<INFO>" + .@item_id[.@s] + "</INFO></ITEM>?";
		mes "Excellent choice!";
		mes "Are you certain you want this?";
		next;
		if (select( "Yes.", "No." ) == 2) {
			mes "[Wyatt Warp]";
			mes "You want to be careful";
			mes "about what you get, I see.";
			mes "Take your time.";
			close;
		}
		mes "[Wyatt Warp]";
		mes "Here, you've earned it.";
		mes "Be proud of yourself.";
		mes "And this is reward money.";
		delitem 25248,1;// Purple_Ore_Crate
		setquest 9457;// Solved Anyway
		completequest 9457;// Solved Anyway
		completequest 7808;// Case Solved
		getitem .@item_id[.@s],1;// Sheriff's_Left_Badge
		getitem 25250,200;// Rock_Ridge_Coin
		getexp 2500000,1200000;
		rock_main_quest = 22;
		close;
	}
	mes "[Wyatt Warp]";
	mes "You've brought hope back to Rock Ridge.";
	mes "Young hero,";
	mes "Stand tall and travel the world like you own it!";
	close;

OnInit:
	questinfo 7793, QTYPE_QUEST, 1;
	setquestinfo_req 7793,7792,1;
	questinfo 7795, QTYPE_QUEST, 1;
	setquestinfo_req 7795,7794,1;
	questinfo 7797, QTYPE_QUEST, 1;
	setquestinfo_req 7797,7796,1;
	questinfo 7799, QTYPE_QUEST, 1;
	setquestinfo_req 7799,7798,1;
	questinfo 7809, QTYPE_QUEST, 1;
	setquestinfo_req 7809,7803,1;
	questinfo 7805, QTYPE_QUEST, 1;
	setquestinfo_req 7805,7804,1;
	end;
}

har_in01,14,24,5	script	Ivoka Skudi#rr03	10212,{
	if (checkweight(1001,1) == 0) {
		mes "- You are carrying too many items to proceed with this quest. -";
		close;
	}
	if (rock_main_quest < 7) {
		mes "[Ivoka Skudi]";
		mes "This is the sheriff's office.";
		mes "It's where those who did something that they shouldn't come in handcuffs.";
		close;
	}
	if (rock_main_quest == 7) {
		mes "[Ivoka Skudi]";
		mes "Johnny must be worried about losing his place in his gang, even though he acts as if he's not.";
		mes "Albert ran once already.";
		next;
		mes "[Ivoka Skudi]";
		mes "Ah, of course, Albert ran. That's so he could bring his friends with him.";
		mes "Well, let me rephrase that? We let him run.";
		next;
		mes "[Ivoka Skudi]";
		mes "And what do you think Johnny thought when he saw that?";
		next;
		select("He probably thought Albert betrayed him.");
		mes "[Ivoka Skudi]";
		mes "That's right. The seeds of distrust have been planted. All we have to do now is";
		next;
		mes "[Ivoka Skudi]";
		mes "tell Johnny that Albert and the others have abandoned him. Albert is their leader now!";
		mes "It's a cliche, but totally convincing, isn't it?";
		next;
		npctalk "But they would never do that. They'd rather raid our village to save him than betray him.", "Wyatt Warp#har_in01", bc_self;
		mes "[Ivoka Skudi]";
		mes "Ah, you have a point. And that's more plausible, isn't it?";
		mes "And this is where you come into play, Adventurer.";
		next;
		mes "[Ivoka Skudi]";
		mes "Someone needs to convince Albert that Johnny isn't worth a dime as a hostage,";
		mes "and we're hoping that'd be you.";
		next;
		mes "[Ivoka Skudi]";
		mes "Tell him";
		mes "we don't need the ores";
		mes "and make him think that he has no bargaining chip.";
		next;
		mes "[Ivoka Skudi]";
		mes "And that it's Johnny that we've wanted all this time.";
		mes "If we can make him believe that, then we can negotiate from a position of strength.";
		next;
		select("What about the mine?");
		mes "[Ivoka Skudi]";
		mes "You could just tell him that HQ is considering to shut it down.";
		mes "It's not like those buffaloes have a way to confirm that.";
		next;
		mes "[Ivoka Skudi]";
		mes "If it's necessary, I could spread a rumor that all the job openings in the village are filled. *Chuckle*";
		npctalk "You think we should pressure Albert, I see. What about Johnny?", "Wyatt Warp#har_in01", bc_self;
		next;
		mes "[Ivoka Skudi]";
		mes "We could tell him Albert has given up on him,";
		mes "and that he's turning everyone else against him to become their leader.";
		next;
		npctalk "I see.", "Wyatt Warp#har_in01", bc_self;
		mes "[Wyatt Warp]";
		mes "Hmm, this isn't a bad idea.";
		mes "I wonder what Costello thinks.";
		mes "He'd probably say something stupid, like ^4d4dffpaying them a million Zeny or so for the ores^000000.";
		next;
		mes "[Wyatt Warp]";
		mes "He wants to solve everything with money? Other people's money.";
		mes "I say we should go with our plan for now.";
		next;
		mes "[Wyatt Warp]";
		mes "You have a very important role in this gig.";
		mes "It was good we lied in the first meeting and said that you were from Headquarters.";
		next;
		mes "[Wyatt Warp]";
		mes "Now, let's take care of Johnny first, shall we?";
		mes "Albert's spy has been going in and out of the basement.";
		npctalk "Yes, and we can use him to our advantage.", "Wyatt Warp#har_in01", bc_self;
		next;
		mes "[Wyatt Warp]";
		mes "Ivoka's right.";
		mes "Let the spy see you talk to Johnny.";
		mes "And convince Johnny that Albert has given up on you.";
		erasequest 7796;
		setquest 7797;// Hear Me Out 1
		rock_main_quest = 8;
		close;
	}
	if (rock_main_quest == 8) {
		mes "[Ivoka Skudi]";
		mes "We'll be counting on you, Adventurer!";
		mes "Don't give Johnny a chance to think.";
		next;
		mes "[Ivoka Skudi]";
		mes "Johnny is locked up in the underground jail.";
		mes "Let's go play him!";
		close;
	}
	if (rock_main_quest < 14) {
		mes "[Ivoka Skudi]";
		mes "Knock on the rock in front of the mine three times, and Albert would come out.";
		mes "I thought that was the signal the miners use for mealtime.";
		next;
		mes "[Ivoka Skudi]";
		mes "Stupid buffaloes.";
		mes "They can't even come up with their own signals.";
		close;
	}
	if (rock_main_quest == 14 || rock_main_quest == 15) {
		mes "[Ivoka Skudi]";
		mes "It worked!";
		mes "Come on, let's go play Johnny!";
		mes "*Chuckle*";
		close;
	}
	mes "[Ivoka Skudi]";
	mes "I can imagine how the buffaloes would react.";
	mes "I'd better train our vigilantes harder.";
	close;

OnInit:
	questinfo 7797, QTYPE_QUEST, 1;
	setquestinfo_req 7797,7796,1;
	end;
}

har_in01,34,28,0	script	har_in01_jail	WARPNPC,1,1,{
	end;
OnTouch:
	if (rock_main_quest < 8) {
		mes "[Ivoka Skudi]";
		mes "You can't get in there.";
		mes "It's a jail cell.";
		close;
	}
	warp "har_in01",99,27;
	end;
}

// Prison
har_in01,100,14,3	script	Vigilante#srdg01	10220,{
	mes "";// todo fix me
	npctalk "You'd better not do anything stupid.", "", bc_self;
	sleep2 1000;
	npctalk "I'm watching you like a hawk.", "", bc_self;
	end;
}

har_in01,81,30,3	script	Harold#srdg01	4_TOWER_09,{
	mes "";// todo fix me
	emotion ET_OHNO;
	npctalk "I can't believe you. Ugh!", "", bc_self;
	sleep2 1000;
	npctalk "What are you talking about?", "Egring#srdg01", bc_self;
	sleep2 1000;
	emotion ET_ANGER;
	npctalk "You didn't pay the restaurant bill on purpose, so you could go to jail, and then you've fattened yourself on prison food. That's messed up!", "", bc_self;
	sleep2 1000;
	emotion ET_HNG, getnpcid(0, "Egring#srdg01");
	npctalk "I can't help it when the food is so delicious.", "Egring#srdg01", bc_self;
	sleep2 1000;
	npctalk "Well, that I agree.", "", bc_self;
	end;
}

har_in01,78,25,5	script	Egring#srdg01	4_DR_TORTEL,{
	mes "";// todo fix me
	emotion ET_THROB;
	npctalk "When are we eating today? What are we having? Beans?", "", bc_self;
	sleep2 1000;
	npctalk "It hasn't been even thirty minutes since our last meal!", "Harold#srdg01", bc_self;
	end;
}

har_in01,89,26,5	script	Johnny James#har_in01	10213,{
	disable_items;
	if (checkweight(1001,1) == 0) {
		mes "- You are carrying too many items to proceed with this quest. -";
		close;
	}
	if (rock_main_quest < 8)
		end;
	if (rock_main_quest == 8) {
		mes "";// todo fix me
		npctalk "You sneaky bastards, how dare you show up again? Go to hell!", "", bc_self;
		sleep2 2000;
		classchange( 10212, "Ivoka Skudi#har02", bc_self );
		npctalk "Ah, you'd better show some respect to our future mayor.", "Ivoka Skudi#har02", bc_self;
		mes "[Ivoka Skudi]";
		mes "I told you I can take care of him.";
		mes "You didn't have to come down here to talk to him.";
		next;
		unittalk getcharid(3), "" + strcharinfo(0) + " : But the negotiation isn't over.", bc_self;
		mes "[Ivoka Skudi]";
		mes "What negotiation?";
		mes "Even his second-in-command has given up on him.";
		mes "He's useless as a hostage.";
		next;
		npctalk "What? Are you talking about Albert?", "", bc_self;
		mes "[Ivoka Skudi]";
		mes "The only thing left to do is hang him, so the others will learn not to mess with us again!";
		mes "Mr. Future Mayor.";
		next;
		mes "[Ivoka Skudi]";
		mes "Even the Sheriff agrees with me.";
		mes "How does tomorrow sound? Or the day after tomorrow?";
		mes "Wait, today's better. It's a perfect day to hang a buffalo!";
		next;
		npctalk "Hang what buffalo? Wait, are you talking about me?", "", bc_self;
		mes "[Johnny James]";
		mes "You've been telling me strange stuff.";
		mes "What do you want?";
		next;
		select("Albert is the new leader of your gang now.");
		mes "[Johnny James]";
		mes "What are you talking about?!";
		mes "Do you think I'd believe you?";
		next;
		npctalk "But he left you and hasn't come back to save you.", "Ivoka Skudi#har02", bc_self;
		select("He said he'd sell the ores to us for a million Zeny.");
		mes "[Johnny James]";
		mes "What? Albert, that moron!";
		mes "Are you not lying?";
		mes "Why are you telling me this?";
		next;
		select("So you could prepare yourself for your punishment.");
		npctalk "Yes. The Sheriff's looking forward to the day he'd be executed. Hah hah hah!", "Ivoka Skudi#har02", bc_self;
		mes "[Johnny James]";
		mes "Hey, hey!";
		mes "Do I have no chance to get out of here?";
		mes "Am I going to die here?";
		next;
		unittalk getcharid(3), "" + strcharinfo(0) + " : Actually, you have.", bc_self;
		mes "[" + strcharinfo(0) + "]";
		mes "Alert wants us to pay him for the ores.";
		mes "But we don't have to pay him if you tell us where they are.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Besides, we also want the mine back. We're not at all comfortable making a deal with him.";
		mes "Johnny, if you help us, we could get the ores back without spending money.";
		npctalk "You're right, Mr. Future Mayor. You're genius!", "Ivoka Skudi#har02", bc_self;
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "And if you help us, we'll take care of Albert for you. He gets in our way to get the mine back, anyway.";
		mes "What do you say?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "Just so you know, this offer won't be on the table too long.";
		mes "I hope you'll make the right decision.";
		next;
		npctalk "...", "", bc_self;
		select("Stop looking outside the window.");
		mes "[Ivoka Skudi]";
		mes "Yes, we've known about the spy.";
		mes "He's here to see when you'd finally be hanged.";
		next;
		mes "[Ivoka Skudi]";
		mes "If he was here to save you, he would've tried to talk to you through the bars, wouldn't he?";
		mes "If I were him, I would've tried to pass you a note.";
		next;
		mes "[Ivoka Skudi]";
		mes "Has he passed you a note?";
		mes "Has he at least made an inmate deposit for you?";
		npctalk "...", "", bc_self;
		next;
		npctalk "Tell you what.", "", bc_self;
		mes "[Johnny James]";
		mes "I'll tell you where the ores are";
		mes "if you let me go.";
		mes "And one more condition.";
		next;
		select("Go on.");
		mes "[Johnny James]";
		mes "...Can you take care of that traitor, Albert?";
		mes "I'll tell you the password you can use to call him out of hiding.";
		next;
		mes "[Johnny James]";
		mes "^4d4dffKnock on the concave rock in front of the mine three times,^000000 and Albert will come out.";
		mes "You can take care of him, then.";
		next;
		mes "[Johnny James]";
		mes "And bring me ^4d4dffhis mane^000000 as proof.";
		mes "If Albert is still alive by the time I'm out of here, I can't go back to my gang.";
		mes "I want him gone.";
		next;
		mes "[Johnny James]";
		mes "I'll tell you where the ores are afterward.";
		next;
		select("Deal.");
		mes "[Johnny James]";
		mes "...Damn it!";
		mes "Don't come back until you have ^4d4dffAlbert's mane^000000 to show to me, got it?";
		mes "Now get outta here!";
		erasequest 7797;
		setquest 7798;// Perfectly Prime
		rock_main_quest = 9;
		close;
	}
	if (rock_main_quest < 14) {
		mes "[Johnny James]";
		mes "Don't come back until you have ^4d4dffAlbert's mane^000000 to show to me, got it?";
		mes "Now get outta here!";
		close;
	}
	if (rock_main_quest == 14) {
		if (countitem(25249) < 1) {
			mes "[Johnny James]";
			mes "Bring me that bastard's mane!";
			close;
		}
		mes "[Johnny James]";
		mes "That sly bastard, he betrayed me!";
		mes "When he got drunk, he used to tell me he'd live longer than I would.";
		next;
		mes "[Johnny James]";
		mes "His spy outside the window even pointed his fingers like guns at me!";
		mes "How's Albert?";
		next;
		select("Show him his mane.");
		mes "[Johnny James]";
		mes "...Are you sure he's dead?";
		mes "Because his spy just pointed his fingers like guns at me.";
		next;
		select("He probably hasn't heard.");
		mes "[Johnny James]";
		mes "...Maybe you're right. Did you come here as soon as you were done with him?";
		mes "That's why his spy hasn't heard about his death.";
		next;
		mes "[Johnny James]";
		mes "Alright, that makes sense.";
		mes "When I get out of here, I'll send that guy to join Albert in Hell.";
		mes "*Chuckle*";
		next;
		mes "[Johnny James]";
		mes "That traitor thought he'd live longer than I would.";
		mes "Look who's still breathing now!";
		next;
		mes "[Johnny James]";
		mes "Alright, I'll tell you where the ores are.";
		mes "They're ^4d4dffunder the elevator on the second floor of the mine^000000.";
		mes "We broke the elevator, so we could hide them underneath it.";
		next;
		mes "[Johnny James]";
		mes "It'll take many of you wimps to lift the elevator.";
		mes "Good luck.";
		mes "And don't forget to tell the sheriff I cooperated.";
		delitem 25249,1;// Buffalo_Bandit_Mane
		erasequest 7803;// Happy for Broken Trust
		setquest 7804;// Location of the Ores
		rock_main_quest = 15;
		close;
	}
	if (rock_main_quest == 15) {
		mes "[Johnny James]";
		mes "Grr, if I get out of here...";
		mes "*Chuckle* I'll make you pay for humiliating me.";
		close;
	}
	mes "[Johnny James]";
	mes "What's taking you so long?";
	mes "I don't like waiting.";
	close;

OnInit:
	questinfo 7798, QTYPE_QUEST, 1;
	setquestinfo_req 7798,7797,1;
	end;
}

har_in01,88,22,6	script	Ivoka Skudi#har02	HIDDEN_WARP_NPC,{
	if (rock_main_quest == 9) {
		mes "[Ivoka Skudi]";
		mes "(Whispering) He's more simpleminded than I thought. Let's go report to the Sheriff.";
		close2;
		classchange( HIDDEN_WARP_NPC, "Ivoka Skudi#har02", bc_self );
		end;
	}
}

// Fild 1
rockrdg1,160,306,3	script	Johnny James#revt04	10213,{ end; }
rockrdg1,168,306,3	duplicate(Johnny James#revt04)	Albert Ford#revt08	10214
rockrdg1,156,302,7	duplicate(Johnny James#revt04)	Ivoka Skudi#revt02	10212
rockrdg1,156,306,5	duplicate(Johnny James#revt04)	Cactus Gunslinger#revt01	10212
rockrdg1,161,302,1	duplicate(Johnny James#revt04)	Cactus Gunslinger#revt02	10212
rockrdg1,164,306,3	duplicate(Johnny James#revt04)	Cactus Gunslinger#revt03	10212

rockrdg1,156,312,3	script	Unmoving Freight Train#	4_ENERGY_RED,{
	if (rock_main_quest == 5) {
		mes "";// todo fix me
		unittalk getcharid(3), "" + strcharinfo(0) + " : I think this is the place, but maybe I came too early.", bc_self;
		sleep2 3000;
		emotion ET_QUESTION, getnpcid(0, "Johnny James#revt04");
		sleep2 200;
		npctalk "Who's this? You're not the one I was expecting.", "Johnny James#revt04", bc_self;
		sleep2 1000;
		npctalk "Hey Boss, I told you not to go without me.", "Albert Ford#revt08", bc_self;
		sleep2 2000;
		npctalk "Mm? I don't remember if Costello looks like that.", "Albert Ford#revt08", bc_self;
		sleep2 1500;
		npctalk "Hey, I'm having an important meeting here. Scram!", "Johnny James#revt04", bc_self;
		sleep2 3000;
		classchange( 10211, "Wyatt Warp#revt03", bc_self );
		npctalk "Johnny James? You shouldn't be so rude to the Officer.", "Wyatt Warp#revt03", bc_self;
		sleep2 2500;
		npctalk "Ah, the sheriff's here. Who's that with you? I told you I wanted to talk to the mayor.", "Johnny James#revt04", bc_self;
		sleep2 2500;
		npctalk "Don't you want your ores and mine back, hmm?", "Johnny James#revt04", bc_self;
		sleep2 200;
		if (select( "I'm from Headquarters.", "I'm the mayor." ) == 1)
			unittalk getcharid(3), "" + strcharinfo(0) + " : I came all the way from Headquarters for this meeting.", bc_self;
		else
			unittalk getcharid(3), "" + strcharinfo(0) + " : You don't keep up with the news, do you? I'm the mayor now.", bc_self;
		sleep2 2000;
		npctalk "Yes. You'll have to talk to him, not Costello.", "Wyatt Warp#revt03", bc_self;
		sleep2 2500;
		emotion ET_AHA, getnpcid(0, "Johnny James#revt04");
		sleep2 200;
		npctalk "So the rumor was right: Costello finally got the hell out of Dodge, huh? Mwa hah hah!", "Johnny James#revt04", bc_self;
		sleep2 2500;
		emotion ET_THINK, getnpcid(0, "Albert Ford#revt08");
		sleep2 3000;
		npctalk "What good would lying do to us? We're the beggars here. Now tell us what you want.", "Wyatt Warp#revt03", bc_self;
		sleep2 3000;
		npctalk "So he could go back to the Headquarters with your demand.", "Wyatt Warp#revt03", bc_self;
		sleep2 2500;
		npctalk "*Snort* You're an enemy, but I admire your straightforwardness. We want?", "Johnny James#revt04", bc_self;
		sleep2 3000;
		npctalk "Okay, that's enough.", "Wyatt Warp#revt03", bc_self;
		sleep2 300;
		npctalk "What? I haven't even started?", "Johnny James#revt04", bc_self;
		sleep2 500;
		specialeffect EF_SCREEN_QUAKE,AREA,"Johnny James#revt04";
		sleep2 200;
		npctalk "Freeze!", "Ivoka Skudi#revt02", bc_self;
		sleep2 800;
		specialeffect EF_NPC_STOP,AREA,"Johnny James#revt04";
		sleep2 200;
		classchange( 10212, "Ivoka Skudi#revt02", bc_self );
		classchange( 10212, "Cactus Gunslinger#revt01", bc_self );
		classchange( 10212, "Cactus Gunslinger#revt02", bc_self );
		classchange( 10212, "Cactus Gunslinger#revt03", bc_self );
		npctalk "Freeze!", "Cactus Gunslinger#revt01", bc_self;
		npctalk "You're trapped", "Cactus Gunslinger#revt03", bc_self;
		npctalk "Buffaloes!", "Cactus Gunslinger#revt02", bc_self;
		npctalk "Wh-what the hell's going on?", "Johnny James#revt04", bc_self;
		sleep2 2000;
		npctalk "Boss! Boss!", "Albert Ford#revt08", bc_self;
		sleep2 2000;
		specialeffect EF_SCREEN_QUAKE,AREA,"Johnny James#revt04";
		sleep2 200;
		npctalk "Buffaloes!", "Cactus Gunslinger#revt01", bc_self;
		npctalk "Buffaloes!", "Cactus Gunslinger#revt03", bc_self;
		npctalk "Buffaloes!", "Cactus Gunslinger#revt02", bc_self;
		sleep2 2000;
		npctalk "*Chuckle*", "Wyatt Warp#revt03", bc_self;
		npctalk "Everything went just as we planned!", "Ivoka Skudi#revt02", bc_self;
		sleep2 2000;
		npctalk "You goddamn Cacti! You were disguised as the plants!";
		sleep2 3000;
		npctalk "Albert, stop looking and do something!", "Johnny James#revt04", bc_self;
		sleep2 2000;
		npctalk "I-I'll go bring the rest of our gang!", "Albert Ford#revt08", bc_self;
		sleep2 1000;
		npctalk "WHAT?", "Johnny James#revt04", bc_self;
		sleep2 1000;
		npctalk "ALBERT!", "Johnny James#revt04", bc_self;
		sleep2 2000;
		npctalk "Hey Johnny, your friend left you.", "Wyatt Warp#revt03", bc_self;
		sleep2 200;
		npctalk "He ran to save himself. *Chuckle*", "Ivoka Skudi#revt02", bc_self;
		sleep2 3000;
		npctalk "Ivoka and our Cacti friends, you did a good job! You can take him away now.", "Wyatt Warp#revt03", bc_self;
		sleep2 1000;
		npctalk "Let's go!", "Cactus Gunslinger#revt01", bc_self;
		npctalk "We've got you now!";
		npctalk "Stop resisting!", "Cactus Gunslinger#revt02", bc_self;
		sleep2 1000;
		npctalk "Hmpf, don't you want your ores back?!", "Johnny James#revt04", bc_self;
		sleep2 1000;
		npctalk "Who cares about the ores?", "Cactus Gunslinger#revt01", bc_self;
		sleep2 1000;
		npctalk "Our job is to take you away!", "Cactus Gunslinger#revt03", bc_self;
		sleep2 1000;
		npctalk "Shut up before I put a ring through your nose!", "Cactus Gunslinger#revt02", bc_self;
		sleep2 1000;
		npctalk "Guys, let's go!", "Ivoka Skudi#revt02", bc_self;
		sleep2 4000;
		classchange( HIDDEN_WARP_NPC, "Ivoka Skudi#revt02", bc_self );
		classchange( HIDDEN_WARP_NPC, "Cactus Gunslinger#revt01", bc_self );
		classchange( HIDDEN_WARP_NPC, "Cactus Gunslinger#revt02", bc_self );
		classchange( HIDDEN_WARP_NPC, "Cactus Gunslinger#revt03", bc_self );
		npctalk "Let's go back, shall we?", "Wyatt Warp#revt03", bc_self;
		erasequest 7795;
		setquest 7796;// Unexpected Arrest
		rock_main_quest = 6;
		close;
	}
	mes "It's worthless and abandoned.";
	close;

OnInit:
	questinfo 7796, QTYPE_QUEST, 1;
	setquestinfo_req 7796,7795,1;
	end;
}

rockrdg1,153,303,5	script	Wyatt Warp#revt03	HIDDEN_WARP_NPC,{
	if (rock_main_quest == 6) {
		mes "[Wyatt Warp]";
		mes "Ivoka's plan worked flawlessly.";
		mes "And it only worked because he and his friends are Cacti.";
		next;
		mes "[Wyatt Warp]";
		mes "If Costello was with us, this plan might not have worked.";
		mes "You being a stranger has distracted them more effectively than we thought.";
		next;
		mes "[Wyatt Warp]";
		mes "And now we can negotiate with the bandits on equal footing.";
		mes "Who knows? We could trade Johnny for the stolen ores.";
		next;
		mes "[Wyatt Warp]";
		mes "Let's go back to my office.";
		close2;
		classchange( HIDDEN_WARP_NPC, "", bc_self );
		end;
	}
}

harboro1,288,193,5	script	Shawn McCurdy#harboro1	10215,{
	if (rock_main_quest < 10) {
		mes "[Shawn McCurdy]";
		mes "I'm worried we miners might not be able to work for a long time,";
		mes "and we can't afford that.";
		mes "This is because of the bandits, right?";
		close;
	}
	if (rock_main_quest == 10) {
		mes "[Shawn McCurdy]";
		mes "Oh, are you the adventurer who I've heard might become our new mayor?";
		mes "Nice to meet you! My name's Shawn McCurdy, and I'm a foreman at the mine.";
		mes "You can call me Shawn.";
		next;
		mes "[Shawn McCurdy]";
		mes "Sheriff Warp told you everything, right?";
		mes "I've heard you've been busy because of the negotiation with the bandits.";
		next;
		mes "[Shawn McCurdy]";
		mes "It also has to do with the mine, doesn't it?";
		mes "I might have a weapon you could use against one of them, Albert Ford.";
		next;
		select("What would that be?");
		mes "[Shawn McCurdy]";
		mes "Unprocessed ores. Just like the ones that the bandits stole from us.";
		mes "These ores are worthless unless they're processed,";
		next;
		mes "[Shawn McCurdy]";
		mes "just like diamonds.";
		mes "In other words, the ores have no use for the bandits.";
		next;
		mes "[Shawn McCurdy]";
		mes "The ores that they stole equal three months worth of work.";
		mes "And that's not a lot, contrary to what most people think.";
		next;
		mes "[Shawn McCurdy]";
		mes "There was only one floor inside the mine,";
		mes "but recently, we've drilled another floor below it.";
		mes "There are a lot of ores buried in that floor, so we've been producing several times the amount we did on the first floor.";
		next;
		mes "[Shawn McCurdy]";
		mes "If necessary, we could produce a few weeks worth of ores in a matter of days.";
		mes "We just can't work because of the bandits squatting in the mine.";
		next;
		select("So the mine is useless at the moment.");
		mes "[Shawn McCurdy]";
		mes "No. Because there's a way to get to the second floor of the mine.";
		mes "And that's the weapon I was talking about.";
		mes "The bandits are only on the first floor. We could sneak into the second floor and continue to mine.";
		next;
		mes "[Shawn McCurdy]";
		mes "And that'll show those bandits they've been wasting their time squatting in the mine.";
		next;
		select("Then what are you waiting for?");
		mes "[Shawn McCurdy]";
		mes "Now, this is the problem.";
		mes "When we first opened the second floor, there was no elevator,";
		mes "so we had to drill the vents and the workers' passage directly from the ground level.";
		next;
		mes "[Shawn McCurdy]";
		mes "Since the elevator started operating, we stopped using the passage,";
		mes "but it's not blocked. We can still use it.";
		next;
		mes "[Shawn McCurdy]";
		mes "And I don't think the bandits know about it.";
		mes "That temporary passage is connected to the farthest corner on the second floor,";
		next;
		mes "[Shawn McCurdy]";
		mes "and the bandits didn't bother checking so deep.";
		mes "I can tell because no bandit is there around the opening.";
		next;
		mes "[Shawn McCurdy]";
		mes "So I'm thinking we should sneak into the second floor and gather ores.";
		mes "Since the bandits set up shop in the mine, most of the experienced miners left.";
		next;
		mes "[Shawn McCurdy]";
		mes "And the temporary passage isn't safe, not since it was re-drilled.";
		mes "Only people as strong as you could go in and out of it without getting hurt.";
		next;
		mes "[Shawn McCurdy]";
		mes "You have to go to the mine for the negotiation with Albert, anyway.";
		mes "You could pick up a few ores on your way to the meeting place and show them to him.";
		next;
		mes "[Shawn McCurdy]";
		mes "The entrance to the second floor of the mine is ^4d4dfffarther south from the main entrance of the mine^000000.";
		mes "I need to make some arrangements. I'll meet you there.";
		erasequest 7799;
		setquest 7800;// Shawn McCurdy's Weapon 2
		rock_main_quest = 11;
		close;
	}
	if (rock_main_quest == 11) {
		mes "[Shawn McCurdy]";
		mes "The entrance to the second floor of the mine is ^4d4dfffarther south from the main entrance of the mine^000000.";
		mes "I need to make some arrangements. I'll meet you there.";
		close;
	}
	if (rock_main_quest < 16) {
		mes "[Shawn McCurdy]";
		mes "The temporary passage drilled for development purposes will stay useful.";
		mes "For adventurers like you, and for Rock Ridge, of course.";
		close;
	}
	if (rock_main_quest == 16) {
		mes "[Shawn McCurdy]";
		mes "So I've heard.";
		mes "I've made all the necessary arrangements.";
		mes "Who knew they'd be hidden right under our nose?";
		next;
		mes "[Shawn McCurdy]";
		mes "This explains why the bandits have been standing guard around the mine.";
		mes "Now it all clicks into place.";
		next;
		mes "[Shawn McCurdy]";
		mes "We know another passage leads to the second floor of the mine.";
		mes "Let's go!";
		close;
	}
	if (rock_main_quest == 22) {
		mes "[Shawn McCurdy]";
		mes "Soon, I'm going to take a few miners who recovered enough to work on the second floor of the mine.";
		mes "We'll have to be careful, of course, since the bandits are still inside the mine.";
		next;
		mes "[Shawn McCurdy]";
		mes "They're on the first floor, so we're just going to block the elevator.";
		mes "There are many things to do.";
		close;
	}
	end;

OnInit:
	questinfo 7800, QTYPE_QUEST, 1;
	setquestinfo_req 7800,7799,1;
	end;
}

rockrdg2,347,216,5	script	Shawn McCurdy#rockrdg2	10215,{
	if (rock_main_quest < 11) {
		npctalk "*Gasp* Adventurer, be careful! This place isn't safe since the Buffalo Bandits have occupied the nearby mine.", "", bc_self;
		end;
	}
	if (rock_main_quest == 11 || rock_main_quest == 12) {
		if (rock_main_quest == 11) {
			mes "[Shawn McCurdy]";
			mes "Wah! Who are you?";
			sleep2 1000;
			unittalk getcharid(3), "" + strcharinfo(0) + " : Take it easy. It's me.", bc_self;
			next;
			mes "[Shawn McCurdy]";
			mes "Oh, whew. Adventurer.";
			mes "Being in such a dangerous place is making me nervous.";
			mes "I'm glad you came here safely.";
			next;
			mes "[Shawn McCurdy]";
			mes "Last time when I came here,";
			mes "I hid the entrance, just in case.";
			mes "Would you like to go downstairs?";
		}
		else {
			mes "[Shawn McCurdy]";
			mes "We need an ore to fool Albert and the other bandits. Do you want to go get it now?";
		}
		next;
		if (select( "Let's do that.", "I'm not ready yet." ) == 2) {
			mes "[Shawn McCurdy]";
			mes "It's dangerous to stay here too long.";
			mes "Please hurry up.";
			close;
		}
		mes "[Shawn McCurdy]";
		mes "Watch your feet.";
		close2;
		warp "rockmi2",14,86;
		end;
	}
	if (rock_main_quest == 13) {
		mes "[Shawn McCurdy]";
		mes "All right!";
		mes "Now, you better head over to see Albert. Good luck negotiating with him!";
		mes "The entrance to the mine is just a little bit north of here.";
		next;
		mes "[Shawn McCurdy]";
		mes "I hope my opinion will be helpful to you!";
		close;
	}
	if (rock_main_quest < 16) {
		mes "[Shawn McCurdy]";
		mes "I'm looking into how we can go ahead and use this place.";
		mes "Of course, I'm not sure if you'll be able to just talk to their leader, but...";
		close;
	}
	if (rock_main_quest < 20) {
		mes "[Shawn McCurdy]";
		mes "Okay, you better get going and see the Buffalo Bandits before they can find this place.";
		close2;
		warp "rockmi2",14,86;
		end;
	}
	if (rock_main_quest == 20) {
		mes "[Shawn McCurdy]";
		mes "Now the only one left is Albert Ford.";
		mes "He must be waiting for Johnny's execution, so he could become the leader of his gang.";
		next;
		mes "[Shawn McCurdy]";
		mes "But it's possible the bandits know we're searching the mine for the box.";
		mes "Now it's our turn to be firm with them.";
		next;
		mes "[Shawn McCurdy]";
		mes "Please ^4d4dffeliminate Buffalo Bandits and take 5 Brown Mufflers and 5 Bandit Scarves with you^000000 on your way there.";
		mes "Let's drive Albert into a corner!";
		close;
	}
	mes "[Shawn McCurdy]";
	mes "I'm cautious because I don't want the bandits to find out about this entrance.";
	mes "Please be careful, Adventurer.";
	close;

OnInit:
	questinfo 7801, QTYPE_QUEST, 1;
	setquestinfo_req 7801,7800,1;
	end;
}

rockmi2,10,86,5	script	Shawn McCurdy#rockmi2	10215,{
	if (rock_main_quest == 11) {
		mes "[Shawn McCurdy]";
		mes "Let's get to work, shall we?";
		mes "Follow this narrow passage, and you'll see a vein of mineral.";
		mes "This place is abundant in minerals.";
		mes "Just get ^4d4dff1 Purple Ore^000000 of adequate size.";
		next;
		mes "[Shawn McCurdy]";
		mes "In the meantime, I'll check the pulley that we need to use to go back up.";
		mes "We made it in a hurry, so it's a bit unsafe sometimes. Hah hah.";
		erasequest 7800;
		setquest 7801;// Shawn McCurdy's Weapon 3
		rock_main_quest = 12;
		close;
	}
	if (rock_main_quest == 12) {
		if (countitem(25247) < 1) {
			mes "[Shawn McCurdy]";
			mes "Adventurer, get ^4d4dff1 Purple Ore^000000.";
			mes "I'll check the pulley that we need to use to go back up.";
			close;
		}
		mes "[Shawn McCurdy]";
		mes "This shows your experience as an adventurer.";
		mes "You've found a big, good-quality ore, even though I didn't tell you what to look for.";
		next;
		mes "[Shawn McCurdy]";
		mes "Good job! This should convince Albert.";
		mes "Alright, let's go back up.";
		erasequest 7801;
		setquest 7802;// Hear Me Out 2
		rock_main_quest = 13;
		close2;
		warp "rockrdg2",348,214;
		end;
	}
	if (rock_main_quest == 16) {
		mes "[Shawn McCurdy]";
		mes "Move to the north from the center of the mine, and you'll see the broken elevator.";
		mes "Stupid bandits, I can't believe they broke the elevator just to hide the ores.";
		next;
		mes "[Shawn McCurdy]";
		mes "They think they're smart,";
		mes "but this proves their stupidity.";
		next;
		mes "[Shawn McCurdy]";
		mes "Check the location of the ores, and bring only ^4d4dff1 Ore Box^000000 with you.";
		mes "I'll move the rest someplace else.";
		next;
		mes "[Shawn McCurdy]";
		mes "The bandits might stand guard around the mine.";
		mes "Please be careful.";
		erasequest 7805;// Location of the Ores 2
		setquest 7806;// Location of the Ores 3
		rock_main_quest = 17;
		close;
	}
	if (rock_main_quest == 17) {
		mes "[Shawn McCurdy]";
		mes "The broken elevator is to the north from the center of this mine.";
		mes "Check the location of the ores, and bring only ^4d4dff1 Ore Box^000000 with you.";
		mes "I'll move the rest someplace else.";
		next;
		mes "[Shawn McCurdy]";
		mes "The bandits might stand guard around the mine.";
		mes "Please be careful.";
		close;
	}
	if (rock_main_quest == 18) {
		mes "[Shawn McCurdy]";
		mes "Ah, I should've known";
		mes "they'd patrol around the elevator.";
		mes "Get rid of any Buffalo Bandits you see, and get ores.";
		close;
	}
	if (rock_main_quest == 19) {
		mes "[Shawn McCurdy]";
		mes "Yes, you brought the correct box.";
		mes "^4d4dffAlbert Ford^000000 will hit the roof if he sees this.";
		next;
		mes "[Shawn McCurdy]";
		mes "Let's get out of here before Albert finds out why his bandits can't come back from their patrol duty.";
		mes "Oh, but you first need to ^4d4dfftalk to him.^000000";
		next;
		mes "[Shawn McCurdy]";
		mes "Please ^4d4dffeliminate Buffalo Bandits and take 5 Brown Mufflers and 5 Bandit Scarves with you^000000 on your way there.";
		next;
		mes "[Shawn McCurdy]";
		mes "They'll help create the situation Sheriff Warp wants.";
		mes "Let's go up, shall we?";
		erasequest 7806;// Location of the Ores 3
		setquest 7807;// Ace up Our Sleeve
		rock_main_quest = 20;
		close2;
		warp "rockrdg2",348,214;
		end;
	}
	if (rock_main_quest == 20) {
		mes "[Shawn McCurdy]";
		mes "Come on, you need to get rid of Buffalo Bandits and catch Albert off guard!";
		mes "Up we go!";
		close2;
		warp "rockrdg2",348,214;
		end;
	}
	end;

OnInit:
	questinfo 7801, QTYPE_QUEST, 1;
	setquestinfo_req 7801,7800,1;
	end;
}

rockmi2,97,120,5	script	Broken Elevator#rrevt10	4_ENERGY_WHITE,{
	if (rock_main_quest < 17) {
		mes "There's a broken elevator.";
		close;
	}
	if (rock_main_quest == 17) {
		mes "[????]";
		mes "Hey look,";
		mes "a rat has sneaked in.";
		next;
		mes "[????]";
		mes "It's good we've caught it,";
		mes "isn't it?";
		close2;
		rock_main_quest = 18;
		monster "rockmi2", 95,116,"Buffalo Bandit",3736,1, "Broken Elevator#rrevt10::OnMyMobDead";
		monster "rockmi2",101,116,"Buffalo Bandit",3737,1, "Broken Elevator#rrevt10::OnMyMobDead";
		monster "rockmi2", 99,110,"Buffalo Bandit",3738,1, "Broken Elevator#rrevt10::OnMyMobDead";
		hideonnpc "Broken Elevator#rrevt10";
		end;
	}
	if (rock_main_quest == 18) {
		mes "I removed the plate from the bottom of the elevator and found boxes of ores underneath it.";
		unittalk getcharid(3), "" + strcharinfo(0) + " : Shawn said just one box.", bc_self;
		getitem 25248,1;// Purple Ore Crate
		rock_main_quest = 19;
		close;
	}
	if (rock_main_quest == 19) {
		unittalk getcharid(3), "" + strcharinfo(0) + " : I have no more business here. I'd better go back to Shawn.", bc_self;
		end;
	}
	end;

OnMyMobDead:
	if (mobcount( "rockrdg2", "Broken Elevator#rrevt10::OnMyMobDead" ) < 0)
		hideoffnpc "Broken Elevator#rrevt10";
	end;
}

