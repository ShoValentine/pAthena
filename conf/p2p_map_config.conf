//================= P2P Map Hosting Configuration ===================
// Configuration file for rAthena P2P-first map hosting system

//----------------------- General Settings -----------------------
general: {
    // Enable P2P hosting for non-critical maps (1 = Yes, 0 = No)
    enable_p2p_maps: 1
    
    // Always prioritize lowest-latency host (1 = Yes, 0 = No)
    prefer_low_latency: 1
    
    // Enable automatic host migration if current host disconnects (1 = Yes, 0 = No)
    enable_auto_migration: 1
    
    // Enable VPS backup for non-critical maps (1 = Yes, 0 = No)
    enable_vps_fallback: 1
    
    // P2P task validation interval (seconds)
    data_check_interval: 5
    
    // Enable security verification for P2P hosts (1 = Yes, 0 = No)
    enable_p2p_security_checks: 1
    
    // Persistence between server restarts (1 = Yes, 0 = No)
    persistent_hosts: 1
}

//----------------------- Host Requirements -----------------------
host_requirements: {
    // Minimum CPU requirement (GHz)
    cpu_min_ghz: 3.0
    
    // Minimum core count
    cpu_min_cores: 4
    
    // Minimum free RAM (MB)
    ram_min_mb: 8192
    
    // Minimum network speed (Mbps)
    net_min_speed: 100
    
    // Maximum allowed latency (ms)
    net_max_latency: 30
    
    // Maximum allowed session instability (disconnects per hour)
    max_disconnects_per_hour: 1
}

//------------------ Real-time Gaming Experience ------------------
realtime_gaming: {
    // Prioritize real-time gaming experience (1 = Yes, 0 = No)
    prioritize_realtime: 1
    
    // Maximum allowed jitter (ms) for real-time gaming
    max_jitter_ms: 15
    
    // Minimum packet processing rate (packets per second)
    min_packet_rate: 100
    
    // Real-time data synchronization interval (milliseconds)
    realtime_sync_interval_ms: 50
    
    // Maximum allowed frame time (ms) for smooth gameplay
    max_frame_time_ms: 16
    
    // Latency weight in host scoring algorithm (higher = more important)
    latency_weight: 0.35
    
    // Network speed weight in host scoring algorithm
    network_speed_weight: 0.25
    
    // CPU performance weight in host scoring algorithm
    cpu_weight: 0.15
    
    // RAM availability weight in host scoring algorithm
    ram_weight: 0.15
    
    // Stability weight in host scoring algorithm
    stability_weight: 0.10
}

//----------------------- P2P-Eligible Maps -----------------------
// Maps that can be hosted by P2P players
// Format: "map_name": 1 (eligible) or 0 (not eligible)
p2p_eligible_maps: {
    // Field Maps (low player density)
    "moc_fild01": 1
    "pay_fild03": 1
    "gef_fild07": 1
    
    // Dungeon Floors (Non-MVP Levels)
    "pay_dun01": 1
    "gef_dun02": 1
    "moc_pryd01": 1
    
    // Low-Level Training Maps
    "iz_dun01": 1
    "morocc_fild12": 1
    
    // Personal Instance Maps
    "custom_housing": 1
    "player_base": 1
    
    // Guild Hall Rooms
    "guild_room": 1
    
    // Quest-Only Maps
    "job_quest_room": 1
    "test_room": 1
    
    // Critical maps that should always be VPS-hosted
    "prontera": 0
    "geffen": 0
    "payon": 0
    "alberta": 0
    "izlude": 0
    "aldebaran": 0
    "comodo": 0
    "yuno": 0
    "amatsu": 0
    "gonryun": 0
    "umbala": 0
    "niflheim": 0
    "louyang": 0
    "new_1-1": 0
    "new_2-1": 0
    "new_3-1": 0
    "new_4-1": 0
    "new_5-1": 0
    "pay_arche": 0
    "xmas": 0
    "jawaii": 0
    "ayothaya": 0
    "einbroch": 0
    "lighthalzen": 0
    "einbech": 0
    "hugel": 0
    "rachel": 0
    "veins": 0
    "moscovia": 0
    "mid_camp": 0
    "manuk": 0
    "splendide": 0
    "brasilis": 0
    "dicastes01": 0
    "mora": 0
    "dewata": 0
    "malangdo": 0
    "malaya": 0
    "eclage": 0
}

//----------------------- Task Distribution -----------------------
// Task distribution for P2P nodes assisting VPS-hosted maps
task_distribution: {
    // Priority levels for different tasks (higher = more important)
    priorities: {
        "npc_processing": 10
        "player_trade": 9
        "monster_ai": 8
        "pathfinding": 7
        "environmental_effects": 5
        "asset_preloading": 3
    }
    
    // Maximum tasks per P2P node
    max_tasks_per_node: 3
    
    // Task reassignment interval (seconds)
    reassignment_interval: 30
}

//----------------------- Failover Settings -----------------------
failover: {
    // Number of backup hosts to maintain per map
    backup_hosts_count: 2
    
    // Maximum time to wait for migration (ms)
    migration_timeout: 1000
    
    // Sync state interval during migration (ms)
    sync_interval: 100
    
    // Keep VPS instance running for all maps (1 = Yes, 0 = No)
    always_keep_vps_ready: 1
}

//----------------------- Monitoring Settings -----------------------
monitoring: {
    // Host health check interval (seconds)
    health_check_interval: 15
    
    // Performance metrics collection interval (seconds)
    metrics_interval: 60
    
    // Log detailed P2P hosting events (1 = Yes, 0 = No)
    detailed_logging: 1
    
    // Alert on host failures (1 = Yes, 0 = No)
    alert_on_failure: 1
}